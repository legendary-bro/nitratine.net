<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="icon" href="/assets/img/favicon.ico">
        <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon"><meta name="theme-color" content="#343a40"><link rel="canonical" href="https://nitratine.net/blog/post/lucy-in-the-sky-with-emotion/">

        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
        <link rel="stylesheet" href="/assets/css/base.css">
        <link rel="stylesheet" href="/assets/css/custom-bootstrap.css"><!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117153268-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-117153268-2');
        </script>
        <title>Lucy In The Sky With Emotion - Nitratine</title>
        <link rel="stylesheet" href="/assets/css/blog.css">
        <link rel="stylesheet" href="/assets/css/pygments.css">

        <meta name="description" content="This project aimed to visualise emotion in music with software developed by six people from the COMP241 (Software Engineering Development) paper as a group project. The project was successful in the end using Spotify to assist emotion detection.">
        <meta name="author" content="Brent Vollebregt">
        <meta property="og:title" content="Lucy In The Sky With Emotion">
        <meta property="og:description" content="This project aimed to visualise emotion in music with software developed by six people from the COMP241 (Software Engineering Development) paper as a group project. The project was successful in the end using Spotify to assist emotion detection.">
        <meta property="og:image" content="/post-assets/lucy-in-the-sky-with-emotion/visualiser5.jpg">
        <meta property="og:url" content="https://nitratine.net/blog/post/lucy-in-the-sky-with-emotion/">
        <meta name="twitter:card" content="summary"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({
                      google_ad_client: "ca-pub-6407227183932047",
                      enable_page_level_ads: true
                 });
            </script>
    </head>

    <body>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <img src="/assets/img/logo.png" width="145" height="30" class="d-inline-block align-top" alt="Brand Icon">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-between" id="navbar">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item ">
                            <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="/blog/">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://www.youtube.com/PyTutorials">YouTube</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/brentvollebregt">GitHub</a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link" href="/about/">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main role="main" class="container">

            
            <div class="row">
                <div class="col-blog-content blog-main">

                    <h1 class="blog-post-title">Lucy In The Sky With Emotion</h1>
                    <p class="text-muted">
                        <a href="/blog/archive/#2017" class="text-muted">21 Dec 2017</a>
                        <a href="/blog/categories/#Projects" class="badge badge-primary ml-2">Projects</a>
                        
                        <a href="/blog/tags/#Python" class="badge badge-warning">Python</a>
                        
                        <a href="/blog/tags/#Machine-Learning" class="badge badge-warning">Machine-Learning</a>
                        
                        <img src="https://hitcounter.pythonanywhere.com/count/tag.svg" alt="Hits" class="post-hits">
                    </p>
                    <p class="lead">This project aimed to visualise emotion in music with software developed by six people from the COMP241 (Software Engineering Development) paper as a group project. The project was successful in the end using Spotify to assist emotion detection.</p>
                    <hr>

                    <div class="post-content">
                        <div class="toc">
<ul>
<li><a href="#what-is-this">What is this?</a></li>
<li><a href="#demonstration-and-screenshots">Demonstration and Screenshots</a><ul>
<li><a href="#gui-emotion-detection">GUI - Emotion Detection</a></li>
<li><a href="#gui-valence-energy-graph">GUI - Valence Energy Graph</a></li>
<li><a href="#visualiser">Visualiser</a></li>
<li><a href="#installation-and-setup">Installation and Setup</a><ul>
<li><a href="#issues">Issues</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a></li>
<li><a href="#credits">Credits</a><ul>
<li><a href="#developers">Developers</a></li>
<li><a href="#project-managers">Project Managers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p><a href="https://github.com/shash678/Lucy-In-The-Sky-With-Emotion">Find the project on GitHub here</a></p>

<p><a href="https://github.com/shash678/Lucy-In-The-Sky-With-Emotion"><img src="https://img.shields.io/github/stars/shash678/Lucy-In-The-Sky-With-Emotion.svg?style=social" alt="Stars" style="margin-bottom: -5px; display: inline-block;"></a>
<a href="https://github.com/shash678/Lucy-In-The-Sky-With-Emotion"><img src="https://img.shields.io/github/forks/shash678/Lucy-In-The-Sky-With-Emotion.svg?style=social" alt="Forks" style="margin-bottom: -5px; display: inline-block;"></a></p>
<h2 id="what-is-this">What is this?</h2>
<p>This project takes a local library of music that is tagged and will predict the emotion of the song of either happy or sad. This data can then be passed to a visualiser which will play the selected song along with fiv other recommended songs based off it's emotional position on a valence energy plane.</p>
<p>When the project is first started it will create a sklearn.neighbors.KNeighborsClassifier instance and be provided <a href="/blog/post/finding-emotion-in-music-with-python/">previously researched data</a> for points to be compared to later. The Browse button then needs to be clicked and a directory selected. The music library is then scraped for tags and searches for them in Spotify. We then get audio data from Spotify for each song (if possible) and present the data on the GUI. When a user clicks on a song, recommendations of the five nearest songs based off emotion, song data and the point on the emotion gradient are all displayed to the user. When the user clicks the Visualise button, data will be sent to the visualiser and started.</p>
<h2 id="demonstration-and-screenshots">Demonstration and Screenshots</h2>
<h3 id="gui-emotion-detection">GUI - Emotion Detection</h3>
<p><img alt="Emotion detection - Lucy in the sky with diamonds" src="/post-assets/lucy-in-the-sky-with-emotion/gui1.png" />
<img alt="Emotion detection - All Star" src="/post-assets/lucy-in-the-sky-with-emotion/gui2.png" /></p>
<h3 id="gui-valence-energy-graph">GUI - Valence Energy Graph</h3>
<p><img alt="GUI - Valence Energy Graph" src="/post-assets/lucy-in-the-sky-with-emotion/valence-plot.png" /></p>
<h3 id="visualiser">Visualiser</h3>
<p><img alt="Visualiser control" src="/post-assets/lucy-in-the-sky-with-emotion/visualiser1.jpg" />
<img alt="Visualiser balls flying" src="/post-assets/lucy-in-the-sky-with-emotion/visualiser2.jpg" />
<img alt="Visualiser environment view" src="/post-assets/lucy-in-the-sky-with-emotion/visualiser3.jpg" />
<img alt="Visualiser paused" src="/post-assets/lucy-in-the-sky-with-emotion/visualiser4.jpg" />
<img alt="Visualiser balls flying colse" src="/post-assets/lucy-in-the-sky-with-emotion/visualiser5.jpg" /></p>
<h3 id="installation-and-setup">Installation and Setup</h3>
<ol>
<li>First clone the repository at <a href="https://github.com/shash678/Lucy-In-The-Sky-With-Emotion">https://github.com/shash678/Lucy-In-The-Sky-With-Emotion</a></li>
<li>Install Python (tested with 3.5.2)</li>
<li>If using Windows, run install_dependencies.bat. If not using windows, run the pip commands in the bat file. This will install most of the modules.</li>
<li>Install scipy by first dowloading it at <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy">http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy</a> and then running <code>pip install [file]</code></li>
<li>Install numpy+mkl by first dowloading it at <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy">http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy</a> and then running <code>pip install [file]</code></li>
<li>Build the visualiser using Unity</li>
<li>Edit the paths in main.py to link to the visualiser<ul>
<li>Lines 123 and 125 to the locations of the desired output (123 for song files and 125 for the CSV file)</li>
<li>Line 156 to the executable to star the visualiser</li>
</ul>
</li>
<li>Read about the issues below</li>
<li>Run main.py</li>
</ol>
<h4 id="issues">Issues</h4>
<p>Currently the visualiser cannot take in dynamic input for audio. CSV files are still read in dynamically and will change based on what song is selected when the visualise button is clicked.</p>
<p>This means music that was used in the building of the visualiser will be the only audio that the vislaiser plays, however the data that the visualiser reads from the CSV to manipulate some functions will still be used.</p>
<p>To temporarily fix this so incorrect data is not displayed can be easily fixed by commenting out lines 153 to 155 in main.py. This will disable the CSV wrting so the original CSV file will still be passing the correct data.</p>
<h3 id="usage">Usage</h3>
<p>To start this project, open up the emotion recognition part of the project by running main.py with Python. When the GUI appears, click Browse and select a folder that contains .mp3 tagged files (doesn't have to be in the top directory).</p>
<p>The Graph button can be pressed to display the songs on the emotion plane (Energy vs Valence).</p>
<p>After you have selected a song you want to visualise, click the Visualise button. After a short moment the visualiser will open and you will be promoted how you want to run it (speed and resolution).</p>
<p>When the visualiser has started, you can hold the left control key to display a list of the controls. These controls are:</p>
<ul>
<li>Esc - Pause</li>
<li>Space - Freeroam the environment. Moves the ball off the pre defined path.</li>
<li>Left / Right Arrows - Previous / Next Song</li>
<li>C - Change Camera</li>
<li>Z - Reset Balls</li>
<li>X - Blow balls away from camera</li>
<li>V - Change mood (for testing)</li>
</ul>
<h3 id="credits">Credits</h3>
<h4 id="developers">Developers</h4>
<ul>
<li><a href="https://github.com/basedrhys">Rhys Compton</a></li>
<li><a href="https://github.com/DylanExton">Dylan Exton</a></li>
<li><a href="https://github.com/ryancomp241">Ryan Le Quesne</a></li>
<li><a href="https://github.com/minionsattle">Seattle Tupuhi</a></li>
<li><a href="https://github.com/brentvollebregt">Brent Vollebregt</a></li>
<li><a href="https://github.com/Woodsy1FD">Jack Woods</a></li>
</ul>
<h4 id="project-managers">Project Managers</h4>
<ul>
<li><a href="https://github.com/swikrit">Swikrit Khanal</a></li>
<li><a href="https://github.com/shash678">Sash Sinha</a></li>
</ul>
                    </div>

                    <nav class="blog-pagination text-center mb-5 mt-4">
                        
                            <a class="btn btn-outline-primary mt-1" href="/blog/post/monopoly-money/">&larr; Monopoly Money</a>
                        
                        
                            <a class="btn btn-outline-primary mt-1" href="/blog/post/adding-snow-to-your-website/">Adding Snow to Your Website &rarr;</a>
                        
                    </nav>

                    
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function() {
                            this.page.url = 'https://nitratine.net/blog/post/lucy-in-the-sky-with-emotion/'; // Your page's canonical URL variable
                            this.page.identifier = 'https://nitratine.net/blog/post/lucy-in-the-sky-with-emotion/'; // Your page's unique identifier variable
                        };
                        (function() {
                            var d = document,
                                s = d.createElement('script');
                            s.src = '//nitratine.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
                    

                </div>

                                <!-- Sidebar -->
                <aside class="col-blog-sidebar blog-sidebar">

                    <div class="card p-3 mb-3 bg-light">
                        <h4 class="text-center text-lg-left">About</h4>
                        <p class="mb-0">Owner of <a href="https://www.youtube.com/PyTutorials">PyTurorials</a> and creator of <a href="https://github.com/brentvollebregt/auto-py-to-exe">auto-py-to-exe</a>. I enjoy making quick tutorials for people new to particular topics in Python and  tools that help fix small things.</p>
                    </div>

                    <div class="input-group mb-3">
                      <input id="search" type="text" class="form-control" placeholder="Search" aria-label="Search">
                        <div class="input-group-append">
                            <button id="search-submit" class="btn btn-outline-primary" type="button">Search</button>
                        </div>
                    </div>
                    <script>let searchUrl = "/search/";</script>
                    <script type="text/javascript" defer src="/assets/js/search.js"></script>

                    <div class="card p-3 mb-3 bg-light">
                        <h4 class="text-center text-lg-left">Categories</h4>
                        <ol class="list-unstyled mb-0 text-center text-lg-left">
                            
                                <li>
                                <a href="/blog/categories/#Apps">&#x1F4F1; Apps
                                    <span class="badge badge-primary ml-3">2</span>
                                </a>
                            </li>
                            
                                <li>
                                <a href="/blog/categories/#General">&#x1F4F0; General
                                    <span class="badge badge-primary ml-3">5</span>
                                </a>
                            </li>
                            
                                <li>
                                <a href="/blog/categories/#Investigations">&#x1F50D; Investigations
                                    <span class="badge badge-primary ml-3">2</span>
                                </a>
                            </li>
                            
                                <li>
                                <a href="/blog/categories/#Projects">&#x1F4BE; Projects
                                    <span class="badge badge-primary ml-3">13</span>
                                </a>
                            </li>
                            
                                <li>
                                <a href="/blog/categories/#Tutorials">&#x1F4D6; Tutorials
                                    <span class="badge badge-primary ml-3">8</span>
                                </a>
                            </li>
                            
                                <li>
                                <a href="/blog/categories/#YouTube">&#x1F3A5; YouTube
                                    <span class="badge badge-primary ml-3">15</span>
                                </a>
                            </li>
                            
                        </ol>
                    </div>

                    <div class="card p-3 mb-3 bg-light">
                        <h4 class="text-center text-lg-left">PyTutorials on YouTube</h4>
                        <script src="https://apis.google.com/js/platform.js"></script>
                        <div style="text-align: center">
                            <div class="g-ytsubscribe" data-channel="PrivateSplat" data-layout="full" data-count="default"></div>
                        </div>
                    </div>

                    <div class="card p-3 mb-3 bg-light">
                        <h4 class="text-center text-lg-left">Recent Videos</h4>
                        <div id="recent-yt-videos" class="yt_video_container"></div>
                    </div>

                    <script>
                        let youtube_data_api_key = 'AIzaSyDz6QJ7H1Ca575XwvKnO8Q4MVATUxLdHYM';
                        let youtube_channel_id = 'UCesEknt3SRX9R9W_f93Tb7g';
                    </script>
                    <script type="text/javascript" defer src="/assets/js/getRecentYouTubeVideos.js"></script>

                </aside>

            </div>


        </main>

        <!-- Bootstrap -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    </body>
</html>